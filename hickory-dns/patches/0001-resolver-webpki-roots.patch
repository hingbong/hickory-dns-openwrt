From fc5eaf34451743df03aa6aa87254d6720a53ce1a Mon Sep 17 00:00:00 2001
From: Hoe Hao Cheng <haochengho12907@gmail.com>
Date: Sat, 24 Feb 2024 18:56:05 +0800
Subject: [PATCH] Forward hickory-dns's root cert features to hickory-resolver

---
 bin/Cargo.toml           | 4 ++--
 crates/server/Cargo.toml | 3 +++
 2 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/bin/Cargo.toml b/bin/Cargo.toml
index 30267023f1..a9f72eb98b 100644
--- a/bin/Cargo.toml
+++ b/bin/Cargo.toml
@@ -93,8 +93,8 @@ tls = ["dns-over-openssl"]
 # WARNING: there is a bug in the mutual tls auth code at the moment see issue #100
 # mtls = ["hickory-client/mtls"]
 
-webpki-roots = ["hickory-client/webpki-roots"]
-native-certs = ["hickory-client/native-certs"]
+webpki-roots = ["hickory-client/webpki-roots", "hickory-server/webpki-roots"]
+native-certs = ["hickory-client/native-certs", "hickory-server/native-certs"]
 
 [[bin]]
 name = "hickory-dns"
diff --git a/crates/server/Cargo.toml b/crates/server/Cargo.toml
index cc07ce2318..e4da6f82f6 100644
--- a/crates/server/Cargo.toml
+++ b/crates/server/Cargo.toml
@@ -100,6 +100,9 @@ dns-over-h3 = [
 tls-openssl = ["dns-over-openssl"]
 tls = ["dns-over-openssl"]
 
+webpki-roots = ["hickory-resolver/webpki-roots"]
+native-certs = ["hickory-resolver/native-certs"]
+
 # WARNING: there is a bug in the mutual tls auth code at the moment see issue #100
 # mtls = ["hickory-client/mtls"]

